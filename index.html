<!DOCTYPE html>
<html>

<head>
  <!--Import Google Icon Font-->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!--Import materialize.css-->
  <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection" />
  <link type="text/css" rel="stylesheet" href="css/custom.css" media="screen,projection" />

  <!--Let browser know website is optimized for mobile-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body class="lin">
  <section>
    <div id="test1" class="col s12">

    </div>
    <div id="test2" class="col s12">
      <div class="row">
              <h5 class="col s10 center blue-text" style="padding-left: 6rem;"> TimeTable </h5> <span><i class="col s2 white-text right material-icons modal-trigger" href="#delete"
                 style="margin-top: 1rem;">delete</i></span>
      </div>

      <div id="delete" class="modal">
        <div id="loader" class="modal-content">
          

        </div>
        <div class="modal-footer">
          <a href="#!" class="modal-close waves-effect waves-green btn-flat">Agree</a>
        </div>
      </div>


      <div class="f1 row white hoverable blue-text darken-4" href="#" style=" border-radius: 1rem; margin: 1rem; ">
        <div class="col l3 s3 m3">
          <br>
          <img src="./img/monday.png" alt="past questions" class="responsive-img">
        </div>
        <div class="col l9 s9 m9">
          <h3>Monday</h3>
          <ol>
            <li>Eat <span class="right">2pm</span></li>
            <li>Sleep <span class="right">12pm</span></li>
          </ol>
        </div>
      </div>

      <div class="f2 row white hoverable blue-text darken-4" href="#" style=" border-radius: 1rem; margin: 1rem; ">
        <div class="col l3 s3 m3">
          <br>
          <img src="./img/tuesday.png" alt="past questions" class="responsive-img">
        </div>
        <div class="col l9 s9 m9">
          <h3>Tuesday</h3>
          <ol>
            <li>Eat <span class="right">2pm</span></li>
            <li>Sleep <span class="right">12pm</span></li>
          </ol>
        </div>
      </div>

      <div class="f3 row white hoverable blue-text darken-4" href="#" style=" border-radius: 1rem; margin: 1rem; ">
        <div class="col l3 s3 m3">
          <br>
          <img src="./img/wednesday.png" alt="past questions" class="responsive-img">
        </div>
        <div class="col l9 s9 m9">
          <h3>Wednesday</h3>
          <ol>
            <li>Eat <span class="right">2pm</span></li>
            <li>Sleep <span class="right">12pm</span></li>
          </ol>
        </div>
      </div>

      <div class="f4 row white hoverable blue-text darken-4" href="#" style=" border-radius: 1rem; margin: 1rem; ">
        <div class="col l3 s3 m3">
          <br>
          <img src="./img/thursday.png" alt="past questions" class="responsive-img">
        </div>
        <div class="col l9 s9 m9">
          <h3>Thursday</h3>
          <ol>
            <li>Eat <span class="right">2pm</span></li>
            <li>Sleep <span class="right">12pm</span></li>
          </ol>
        </div>
      </div>

      <div class="f5 row white hoverable blue-text darken-4" href="#" style=" border-radius: 1rem; margin: 1rem; ">
        <div class="col l3 s3 m3">
          <br>
          <img src="./img/friday.png" alt="past questions" class="responsive-img">
        </div>
        <div class="col l9 s9 m9">
          <h3>Friday</h3>
          <ol>
            <li>Eat <span class="right">2pm</span></li>
            <li>Sleep <span class="right">12pm</span></li>
          </ol>
        </div>
      </div>

      <div class="f6 row white hoverable blue-text darken-4" href="#" style=" border-radius: 1rem; margin: 1rem; ">
        <div class="col l3 s3 m3">
          <br>
          <img src="./img/saturday.png" alt="past questions" class="responsive-img">
        </div>
        <div class="col l9 s9 m9">
          <h3>Saturday</h3>
          <ol>
            <li>Eat <span class="right red-text waves-effect waves-red" style="margin-left:2rem">delete</span> <span
                class="right">2pm</span></li>
            <li>Eat <span class="right red-text waves-effect waves-red" style="margin-left:2rem">delete</span> <span
                class="right">2pm</span></li>
            <li>Eat <span class="right red-text waves-effect waves-red" style="margin-left:2rem">delete</span> <span
                class="right">2pm</span></li>
          </ol>
        </div>
      </div>
      <div class="f7 row white hoverable blue-text darken-4" href="#"
        style=" border-radius: 1rem; margin: 1rem; margin-bottom: 3rem; ">
        <div class="col l3 s3 m3">
          <br>
          <img src="./img/sunday.png" alt="past questions" class="responsive-img">
        </div>
        <div class="col l9 s9 m9">
          <h3>Sunday</h3>
          <ol style="max-width: 20rem; ">
            <li><span style="max-width: 0.5rem;">Eat</span> <span class="right" style="margin-left:0.5rem">2pm to
                10pm</span> <span class="right red-text waves-effect waves-red">delete</span> </li>
            <li><span style="max-width: 0.5rem;">Eat</span> <span class="right" style="margin-left:0.5rem">2pm to
                10pm</span> <span class="right red-text waves-effect waves-red">delete</span> </li>
            <li><span style="max-width: 0.5rem;">Eat</span> <span class="right" style="margin-left:0.5rem">2pm to
                10pm</span> <span class="right red-text waves-effect waves-red">delete</span> </li>
          </ol>
        </div>
      </div>
      <div class="row right" style="height: rem;">
        <a id="fab"
          class="animate__animated animate__fadeIn fab btn-floating btn-large waves-effect waves-light blue darken-3 modal-trigger"
          href="#modal1"><i class="material-icons">add</i></a>
      </div>

      <section>
        <!-- Modal Structure -->
        <div id="modal1" class="modal blue-text darken-4" style="border-radius: 1rem; width: 90%; overflow-x: hidden;">
          <div class="modal-content center">
            <form action="">
              <h5>Details</h5>
              <div class="input-field col s12">
                <select id="days" required />
                <option value="" disabled selected>Choose your option</option>
                <option value="mon">Monday</option>
                <option value="tue">Tuesday</option>
                <option value="wed">Wednesday</option>
                <option value="thu">Thursday</option>
                <option value="fri">Friday</option>
                <option value="sat">Saturday</option>
                <option value="sun">Sunday</option>
                </select>
                <label>Which Day?</label>
              </div>

              <div class="input-field col s12">
                <input id="TtSubject" type="text" data-length="12" required />
                <label for="TtSubject">Subject</label>
              </div>
              <div class="row">
                <p class="range-field">
                  <label for="time">from</label>
                  <input type="range" id="ftime" min="0" max="12" />

                </p>

                <div class="row">
                  <!-- Switch -->
                  <div class="col left switch">
                    <label>
                      AM
                      <input id="fcheck" type="checkbox">
                      <span class="lever"></span>
                      PM
                    </label>
                  </div>
                  <div class="col right" id="fTtime"><span id="fST">6</span><span id="fper">AM</span></div>
                </div>
              </div>
              <div class="row">
                <p class="range-field">
                  <label for="time">to</label>
                  <input type="range" id="ttime" min="0" max="12" />

                </p>

                <div class="row">
                  <!-- Switch -->
                  <div class="col left switch">
                    <label>
                      AM
                      <input id="tcheck" type="checkbox">
                      <span class="lever"></span>
                      PM
                    </label>
                  </div>
                  <div class="col right" id="tTtime"><span id="tST">6</span><span id="tper">AM</span></div>
                </div>
              </div>
              <div class="center row">
                <p id="sumTime"><span id="ft">6</span><span id="ftt">AM</span> to <span id="tt">6</span><span
                    id="ttt">AM</span></p>
              </div>
              <div class="row center">
                <a id="save" class="modal-close waves-effect waves-green btn-flat">save</a>
              </div>
            </form>
          </div>
        </div>
      </section>

    </div>
    <div id="test3" class="col s12">Test 3</div>
  </section>
  <section>
    <div class="botnav row">
      <div class="row">

        <div class="tabs">
          <li class="tab col center s4 m4 l4"><a href="#test1">
              <div style="padding: 1rem;">
                <span><i class="white-text norm material-icons">alarm</i></span>
              </div>
            </a></li>

          <li class="tab col center s4 m4 l4"><a href="#test2" class="active">
              <div class="" style="padding: 1rem;">
                <i class="white-text norm material-icons">apps</i>
              </div>
            </a></li>

          <li class="tab col center s4 m4 l4"><a href="#test3">
              <div class="" style="padding: 1rem;">
                <i class="white-text norm material-icons">assignment_turned_in</i>
              </div>
            </a></li>
        </div>

      </div>



    </div>
  </section>
  <!--JavaScript at end of body for optimized loading-->
  <script type="text/javascript" src="js/materialize.min.js"></script>
  <script>M.AutoInit()</script>
  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-app.js"></script>

  <!-- TODO: Add SDKs for Firebase products that you want to use
       https://firebase.google.com/docs/web/setup#available-libraries -->
  <script src="https://www.gstatic.com/firebasejs/7.15.0/firebase-analytics.js"></script>
  <script src="./js/fireconfig.js"></script>
  <script src="./js/custom.js"></script>

  <script>
        const loader = document.getElementById('loader');
    document.getElementById('TtSubject').addEventListener('change', function () {
      let num = document.getElementById('TtSubject').value
      if (num.length > 12) {
        alert('you cant write more than 12 letters')
        document.getElementById('TtSubject').disabled = true
      } else { }
    });
    //Created a class so a new instance object can be call each time the save button is clicked
    class Tt {
      constructor(id, day, sub, tim, ) {
        return { id: id, day: day, sub: sub, tim: tim }
      }
    }




    //create an array to hold the values
    // var timeTable = JSON.parse(localStorage.getItem('timeTable'));
    document.getElementById('save').addEventListener('click', function () {
      //gets the values
      const days = document.getElementById('days').value
      const TtSubject = document.getElementById('TtSubject').value
      const Ttime = document.getElementById('sumTime').innerText

      if (days == "" || TtSubject == "") { alert('you need to fill in day and subject') }
      else {

        //check for already existing value
        if (localStorage.getItem('timeTable') == null) {
          console.log('hello')
          var id = 0
        } else {
          console.log('else')
          var id = JSON.parse(localStorage.getItem('timeTable')).length //uses the arrays length as an identifial
          // console.log(new Tt(days,TtSubject, Ttime))
        }


        // //push the new object/timetable input to the array
        // timeTable.push(new Tt(id, days, TtSubject, Ttime));
        const NEW = new Tt(id, days, TtSubject, Ttime)


        var addToLocalStorageArray = function (value) {
          // Get the existing data
          var existing = localStorage.getItem('timetable');
          // If no existing data, create an array
          // Otherwise, convert the localStorage string to an array
          if (localStorage.getItem('timeTable') == null) {
            existing = []
            // Add new data to localStorage Array
            existing.push(value);
            // Save back to localStorage
            localStorage.setItem('timeTable', JSON.stringify(existing));
          } else {
            existing = JSON.parse(localStorage.getItem('timeTable'));
            // Add new data to localStorage Array
            existing.push(value);
            // Save back to localStorage
            localStorage.setItem('timeTable', JSON.stringify(existing));
          }


        };

        addToLocalStorageArray(NEW)

        console.log(JSON.parse(localStorage.getItem('timeTable')))
      }
    })
    console.log(localStorage)
    console.log(JSON.parse(localStorage.getItem('timeTable')))
    const Ttable = JSON.parse(localStorage.getItem('timeTable'))

    Ttable.forEach(function (doc) {
      console.log(doc)
      del(doc)
    })


    function del(data){
  const html = `
      <p>
          <span style="margin:1rem;">${data.id}</span>
          <span style="margin:1rem;">${data.day}</span>
          <span style="margin:1rem;">${data.sub}</span>
          <span style="margin:1rem;">${data.tim}</span>
      </p>
          
    `;

  loader.innerHTML += html
    }

  </script>

</body>

</html>